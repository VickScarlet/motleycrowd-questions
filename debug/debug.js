import { review } from './review.js';
import assert from 'assert';

const data = {
    "questions": [
      ["qs1001","ABCDEGH"],
      ["qs2008","ABC"],
      ["qs3004","AB"],
      ["qs4005","ABCD"],
      ["qs5004","ABC"],
      ["qs6002","ABCD"],
      ["qs7001","AB"]
    ],
    "users": ["10a7","10a6","106w","108h","10aa","10au","10ax","105p","100q","10b2"],
    "scores": {
      "10a7": [ 0.5,    [ [1,  "A"], [-1,"B"], [0,"A"], [ 0,"C"], [0,"A"], [1,   "C"], [-0.5, "B"] ]],
      "10a6": [-4.5,    [ [0,  "H"],  -1,       0,       -1,      -2,       0,          -0.5       ]],
      "106w": [-4.5,    [ [0,  "G"],  -1,       0,       -1,      -2,       0,          -0.5       ]],
      "108h": [ 0,      [  0,         -1,      [0,"A"], [ 2,"A"], [1,"C"], [2.33,"D"], [-4.33,"A"] ]],
      "10aa": [ 0.5,    [ [0,  "E"], [-1,"C"], [0,"A"], [ 0,"C"], [0,"B"], [2,   "B"], [-0.5, "B"] ]],
      "10au": [-0.17,   [ [0,  "E"], [-1,"C"], [0,"A"], [-1,"D"], [0,"B"], [2.33,"D"], [-0.5, "B"] ]],
      "10ax": [ 3,      [ [0,  "D"], [-1,"B"], [0,"B"], [ 2,"B"], [1,"C"], [1,   "C"], [ 0,   "A"] ]],
      "105p": [ 2.33,   [ [1.5,"B"], [-1,"B"], [0,"B"], [ 0,"C"], [0,"A"], [2.33,"D"], [-0.5, "B"] ]],
      "100q": [ 2,      [ [1,  "A"], [-1,"C"], [0,"B"], [ 0,"C"], [1,"C"], [1,   "C"], [ 0,   "A"] ]],
      "10b2": [-0.5,    [ [0,  "D"], [-1,"C"], [0,"A"], [ 0,"C"], [1,"C"],  0,         [-0.5, "B"] ]]
    },
  };
const revS = {
    "scores": {
        "10a7":[ 2.83,  [ [1,  "A"], [ 1,"B"], [0,"A"], [ 0,"C"], [0,"A"], [1.33,"C"], [-0.5,"B"] ]],
        "10a6":[-4.5,   [  0,         -1,       0,       -1,      -2,       0,          -0.5      ]],
        "106w":[-4.5,   [  0,         -1,       0,       -1,      -2,       0,          -0.5      ]],
        "108h":[ 3,     [  0,         -1,      [0,"A"], [ 2,"A"], [1,"C"], [1,   "D"], [ 0,  "A"] ]],
        "10aa":[ 0.5,   [ [0,  "E"], [-1,"C"], [0,"A"], [ 0,"C"], [0,"B"], [2,   "B"], [-0.5,"B"] ]],
        "10au":[-1.5,   [ [0,  "E"], [-1,"C"], [0,"A"], [-1,"D"], [0,"B"], [1,   "D"], [-0.5,"B"] ]],
        "10ax":[ 3.33,  [ [0,  "D"], [ 1,"B"], [0,"B"], [ 0,"B"], [1,"C"], [1.33,"C"], [ 0,  "A"] ]],
        "105p":[ 4.5,   [ [3,  "B"], [ 1,"B"], [0,"B"], [ 0,"C"], [0,"A"], [1,   "D"], [-0.5,"B"] ]],
        "100q":[ 2.33,  [ [1,  "A"], [-1,"C"], [0,"B"], [ 0,"C"], [1,"C"], [1.33,"C"], [ 0,  "A"] ]],
        "10b2":[-0.5,   [ [0,  "D"], [-1,"C"], [0,"A"], [ 0,"C"], [1,"C"],  0,         [-0.5,"B"] ]]
    }
};
const rev = review(data);
try {
    assert.equal(data.scores, rev.scores, 'scores not equal');
} catch (e) {
    console.debug(
        JSON.stringify(data.scores),
        '\n',
        JSON.stringify(rev.scores),
    )
    debugger
}